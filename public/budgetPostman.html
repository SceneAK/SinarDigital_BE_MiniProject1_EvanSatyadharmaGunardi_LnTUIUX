<!-- Generated by ChatGPT -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTTP Request Tester</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input[type="text"] { margin: 4px 0; }
    .kv-row { margin-bottom: 5px; }
    .kv-row input { width: 200px; }
    .kv-row button { margin-left: 5px; }
  </style>
</head>
<body>
  <h1>HTTP Request Tester</h1>

  <label for="url">URL:</label>
  <input type="text" id="url" placeholder="https://example.com/api" size="50"><br><br>

  <label for="method">Method:</label>
  <select id="method">
    <option>GET</option>
    <option>POST</option>
    <option>PUT</option>
    <option>PATCH</option>
    <option>DELETE</option>
  </select><br><br>

  <h3>Body (JSON)</h3>
  <div id="kv-container"></div>
  <button onclick="addKV()">Add Field</button><br><br>

  <button onclick="sendRequest()">Send Request</button>

  <h2>Response:</h2>
  <pre id="response"></pre>

  <script>
    const container = document.getElementById('kv-container');

    function addKV(key = '', value = '') {
      const row = document.createElement('div');
      row.className = 'kv-row';
      row.innerHTML = `
        <input type="text" placeholder="Key" value="${key}" class="kv-key">
        <input type="text" placeholder="Value" value="${value}" class="kv-value">
        <button onclick="removeKV(this)">Remove</button>
      `;
      container.appendChild(row);
    }

    function removeKV(button) {
      button.parentElement.remove();
    }

    function getJSONBody() {
      const keys = document.querySelectorAll('.kv-key');
      const values = document.querySelectorAll('.kv-value');
      const obj = {};
      keys.forEach((keyInput, index) => {
        const key = keyInput.value.trim();
        const value = values[index].value;
        if (key) obj[key] = value;
      });
      return JSON.stringify(obj, null, 2);
    }

    async function sendRequest() {
      const url = document.getElementById('url').value;
      const method = document.getElementById('method').value;

      let options = { method };

      if (method !== 'GET') {
        const body = getJSONBody();
        if (body !== '{}') {
          options.headers = { 'Content-Type': 'application/json' };
          options.body = body;
        }
      }

      try {
        const res = await fetch(url, options);
        const text = await res.text();
        document.getElementById('response').textContent = text;
      } catch (err) {
        document.getElementById('response').textContent = 'Error: ' + err;
      }
    }

    // Start with one empty field
    addKV();
  </script>
</body>
</html>

